{"componentChunkName":"component---src-templates-post-template-tsx","path":"/system-2-2024-11-07-wil/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>발표에 앞서</h1>\n<h1>문제 이해 및 설계 범위 확정</h1>\n<h2>기능 요구사항</h2>\n<ol>\n<li>사용자의 위치(위도, 경도)와 검색 반경 정보(0.5KM, 1KM, …) 입력 시, 해당 위치 반경 내의 사업장 정보 검색</li>\n<li>사업자 정보 등록, 수정, 삭제 기능 + 조회는 실시간 반영되지 않아도 무방</li>\n<li>사업장의 상세 정보를 조회하는 기능</li>\n</ol>\n<h2>비기능 요구사항</h2>\n<ol>\n<li><a href=\"https://www.appsflyer.com/ko/trust/privacy/\" target=\"_blank\" rel=\"nofollow\">GDPR, CCPA 준수</a> -> 가장 가까운 리전을 사용해서 데이터 저장</li>\n</ol>\n<p>광고 대행사에서 Appsflyer 를 통해서 데이터 수집을 하고 해당 데이터를 기반으로\n마케팅 비용을 책정한 경험이 있음. 이에 따라 Appsflyer 를 연동하였는데,\n연동하는 과정에서 사용자의 데이터를 굉장히 조심스럽게 수집한다는 느낌을 받음.</p>\n<ol start=\"2\">\n<li>낮은 응답지연 -> <a href=\"https://aws.amazon.com/ko/global-accelerator/\" target=\"_blank\" rel=\"nofollow\">AWS Global Accelerator</a> 활용</li>\n</ol>\n<p>처음에는 AWS Route53의 지리적 위치 기반 라우팅이 있던데 그걸 사용하면 되는게 아닌가 했는데\nAWS Global Accelerator 는 좀 더 풍부한 기능을 제공.</p>\n<ul>\n<li>엣지 로케이션 뒤의 백본 네트워크 활용가능 -> 단일 리전에서 사용해도 좋아보임.</li>\n<li>Global IP 제공</li>\n<li>자동 장애조치 및 트래픽 라우팅</li>\n<li>AWS Shield 기본 적용</li>\n</ul>\n<p>AWS Global Accelerator 는 잘 몰랐을 때 ALB의 고정 IP 가 필요해서 사용해본 기억이 있다.\n이런 기능들도 있었다는걸 깨달음.</p>\n<ol start=\"3\">\n<li>고가용성</li>\n</ol>\n<p>AWS ASG, EKS 등 활용</p>\n<h1>개략적 설계안 제시 및 피드백</h1>\n<h2>트래픽 분석</h2>\n<ul>\n<li>기본 데이터\n<ul>\n<li>DAU: 1억명</li>\n<li>사업장 수: 2억개</li>\n<li>사용자당 일일 검색 횟수: 5회</li>\n</ul>\n</li>\n<li>계산식\n<ul>\n<li>QPS = (1억 * 5회) / (24시간 * 60분 * 60초)</li>\n<li>결과: 약 5,000 QPS</li>\n</ul>\n</li>\n<li>특정 시간대 트래픽 집중\n<ul>\n<li>피크 시간대\n사전 <a href=\"https://docs.aws.amazon.com/ko_kr/autoscaling/ec2/userguide/ec2-auto-scaling-warm-pools.html\" target=\"_blank\" rel=\"nofollow\">AWS Warm pool</a>\n고려</li>\n</ul>\n</li>\n</ul>\n<h1>상세 설계</h1>\n<h2>API 설계</h2>\n<p>인증은 API 경로로 구분할 것이며 상세 설계에 포함되지는 않을 예정.</p>\n<h3>Client API</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET /v1/search/nearby</code></pre></div>\n<h3>Admin API</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">GET    /v1/business/:id\nPOST   /v1/business\nPUT    /v1/business/:id\nDELETE /v1/business/:id</code></pre></div>\n<h3>현재 이슈</h3>\n<ul>\n<li>읽기 위주 작업에 RDB 사용의 적절성 검토 필요</li>\n<li>지리 데이터 처리를 위한 DB 선택\n<ul>\n<li>PostgreSQL + PostGIS 일반적 사용</li>\n<li>NoSQL 등 대체 솔루션과 비교 분석 필요</li>\n</ul>\n</li>\n</ul>\n<h3>아키텍처 방향</h3>\n<ul>\n<li>Read/Write 분리 클러스터링\n<ul>\n<li>최종 일관성 1일 이내 허용</li>\n<li>Replication Lag 허용</li>\n</ul>\n</li>\n</ul>\n<h3>서비스 분리</h3>\n<ul>\n<li>Client-Service (사업장 서비스)</li>\n<li>Admin-Service (관리자 서비스)</li>\n</ul>\n<h2>알고리즘 선택 및 검토</h2>\n<h3>2차원 검색</h3>\n<p>일반적으로 데이터베이 색인은 한 차원의 검색 속도만 개선 가능.\n각각 한 차원씩 색인을 만들어두고 교집합을 검색하는 경우는 데이터의 양이 상당히 많아질 수 있음.</p>\n<p>위도, 경도를 하나의 차원으로 색인을 만들 수 있는 방법이 있을까?</p>\n<h3>해시 - 균등 격자</h3>\n<p>지도를 균등하게 나누어서 색인을 만드는 방법.\n한 차원으로 색인은 성공. 하지만 단점으로는 균등하게 나눠진 부분에서 사업장 분포가 균등하지 않을 수 있음.</p>\n<h3>해시 - 지오 해시</h3>\n<p>위도, 경도 데이터를 지오해시 알고리즘을 통해 1차원의 문자열로 변환.\n이 때 문자열의 길이는 정확도를 결정.</p>\n<p>사업장 분포가 균등하지 않을 수 있나 인접한 지오해시로부터 점점 확장하면 됨. (상수 시간 해결)</p>\n<p>솔루션: Redis GeoSpatial</p>\n<blockquote>\n<p>Spring Data Redis 를 사용해서 Redis Geospatial 을 사용할 수 있다.\n많은 예제가 있어서 나중에 사용한다면 참고하면 좋을 것 같다.</p>\n</blockquote>\n<p>단점:</p>\n<ul>\n<li>접두사가 같으면 비슷한 위치에 있다. 하지만 그 역은 성립하지 않음.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 특정 지오해시가 주어졌을 때 주변의 지오해시를 계산하는 방법</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_neighbor</span><span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> direction<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    주어진 지오해시의 특정 방향 인접 영역을 계산합니다.\n\n    Args:\n        geohash: 기준 지오해시 문자열\n        direction: 방향 ('n','s','e','w','ne','nw','se','sw' 중 하나)\n\n    Returns:\n        str: 인접한 지오해시 문자열\n    \"\"\"</span>\n\n    <span class=\"token comment\"># 지오해시 base32 인코딩 문자</span>\n    base32 <span class=\"token operator\">=</span> <span class=\"token string\">'0123456789bcdefghjkmnpqrstuvwxyz'</span>\n\n    <span class=\"token comment\"># 각 문자의 이웃 관계 정의</span>\n    neighbors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'n'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'bc01fg45238967deuvhjyznpkmstqrwx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'p0r21436x8zb9dcf5h7kjnmqesgutwvy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'s'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'238967debc01fg45kmstqrwxuvhjyznp'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'14365h7k9dcfesgujnmqp0r2twvyx8zb'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'e'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'p0r21436x8zb9dcf5h7kjnmqesgutwvy'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bc01fg45238967deuvhjyznpkmstqrwx'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'w'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'14365h7k9dcfesgujnmqp0r2twvyx8zb'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'238967debc01fg45kmstqrwxuvhjyznp'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n\n    border <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'n'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'bcfguvyz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'prxz'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'s'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'0145hjnp'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'028b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'e'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'prxz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bcfguvyz'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'w'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'028b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'0145hjnp'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\"># 대각선 방향은 두 방향의 조합</span>\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>direction<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> get_neighbor<span class=\"token punctuation\">(</span>get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> direction<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> direction<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    last_ch <span class=\"token operator\">=</span> geohash<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 마지막 문자</span>\n    parent <span class=\"token operator\">=</span> geohash<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 마지막 문자를 제외한 부분</span>\n\n    type_idx <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token number\">2</span>\n\n    <span class=\"token comment\"># 경계에 있는 경우</span>\n    <span class=\"token keyword\">if</span> last_ch <span class=\"token keyword\">in</span> border<span class=\"token punctuation\">[</span>direction<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>type_idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n        parent <span class=\"token operator\">=</span> get_neighbor<span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">,</span> direction<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># 이웃 문자 찾기</span>\n    next_idx <span class=\"token operator\">=</span> neighbors<span class=\"token punctuation\">[</span>direction<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>type_idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>last_ch<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> next_idx <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n        next_idx <span class=\"token operator\">=</span> base32<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>last_ch<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> next_idx <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> parent\n    <span class=\"token keyword\">return</span> parent <span class=\"token operator\">+</span> base32<span class=\"token punctuation\">[</span>next_idx<span class=\"token punctuation\">]</span>\n\n\n<span class=\"token comment\"># wydm2의 모든 인접 영역 계산</span>\ngeohash <span class=\"token operator\">=</span> <span class=\"token string\">'wydm2'</span>\n\nneighbors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'n'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'ne'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'ne'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'e'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'e'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'se'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'se'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'s'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'sw'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'sw'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'w'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'nw'</span><span class=\"token punctuation\">:</span> get_neighbor<span class=\"token punctuation\">(</span>geohash<span class=\"token punctuation\">,</span> <span class=\"token string\">'nw'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># 결과 출력</span>\n<span class=\"token keyword\">for</span> direction<span class=\"token punctuation\">,</span> value <span class=\"token keyword\">in</span> neighbors<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>direction<span class=\"token punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<blockquote>\n<p>표시할 사업장이 충분하지 않은 경우</p>\n</blockquote>\n<ol>\n<li>사용자의 지오해시로부터 인접한 지오해시 List 를 반환하고</li>\n<li>인접한 지오해시 List 에서 사업장을 찾는다.</li>\n<li>사업장이 충분하지 않은 경우 인접한 지오해시로부터 인접한 지오해시를 계속 찾는다.</li>\n<li>사업장이 충분해질 때까지 반복한다.</li>\n</ol>\n<h3>트리 - 쿼드 트리</h3>\n<p>어플리케이션이 시작할 때 말단 노드가 최소 사업장 갯수를 만족할 때까지 트리를 구축한다.</p>\n<blockquote>\n<p>메모리 계산</p>\n</blockquote>\n<ol>\n<li>데이터베이스에 구축하는게 아니라 메모리 내부에 존재하기 때문에 메모리 계산이 중요.</li>\n<li>Application Server 가 시작할 때 구축이 되어야 함.</li>\n<li>사용하는 메모리 크기는 얼마정도 될까?\n<ol>\n<li>말단 노드에 포함되어야할 사업장의 갯수는?</li>\n<li>말단 노드, 내부 노드 각각의 크기를 우선 계산.</li>\n<li>말단 노드, 내부 노드의 수를 계산.\n<ol>\n<li>말단 노드의 수 -> 요구사항에 달림. 전체의 값 중에 각 격자 안에 몇개의 값이 포함되어야 하는지?</li>\n<li>내부 노드의 수 = 말단 노드의 수 * (1 / 3) <a href=\"https://www.acmicpc.net/board/view/65494\" target=\"_blank\" rel=\"nofollow\">설명</a></li>\n</ol>\n</li>\n<li>말단 노드, 내부 노드의 크기를 곱해서 메모리 크기를 계산.</li>\n</ol>\n</li>\n</ol>\n<ul>\n<li>결론 -> 생각보다 많이 잡아먹지 않음.</li>\n</ul>\n<blockquote>\n<p>탐색</p>\n</blockquote>\n<ol>\n<li>위도, 경도가 주어짐.</li>\n<li>2.루트 노드부터 각 좌상단, 우하단 좌표를 비교해서 말단 노드까지 내려감.</li>\n<li>말단 노드에 충분한 사업장 갯수가 있으면 반환, 그렇지 않다면 인접노드도 추가</li>\n</ol>\n<blockquote>\n<p>주의사항</p>\n</blockquote>\n<ul>\n<li>서버가 가동될 때 몇분간 트리 구축 시간이 소요됨 -> 한꺼번에 동시 업데이트 시 문제 발생가능성</li>\n<li>장소가 추가될 때 실시간으로 트리 재구축 하는것이 어려움 ( 캐시무효화, 락 등의 문제 )</li>\n</ul>\n<h3>트리 - 구글 S2</h3>\n<ul>\n<li>구글 S2 는 지오펜스를 구현할 수 있다.</li>\n<li>지오펜스는 어떤것?\n<ul>\n<li>기본적인 주변 사업장 검색 지원</li>\n<li>관심있는 영역을 설정하고 해당 경계를 벗어나면 알림을 주는 게 가능.\n<ul>\n<li>배민 기존 지역과 다른 지역에서 어플리케이션을 실행했을 때 다른지역이라고 알림을 주는것?이 될 수 있나?</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>개인적으로 사용한다면 지오해시를 사용할 것 같다.</p>\n<ul>\n<li>상용 제품들이 많이 나와있음.</li>\n<li>레퍼런스가 많음.</li>\n<li>상대적으로 쿼드 트리보다 구축이 쉬워보임</li>\n</ul>\n</blockquote>\n<h2>지리 정보 테이블 구조 설계</h2>\n<ol>\n<li>Hash 와 business_ids</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>geo hash</th>\n<th>business_ids</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>32feac</td>\n<td>343, 123,</td>\n</tr>\n<tr>\n<td>f3lcad</td>\n<td>456, 789, 111</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"2\">\n<li>Hash 와 business_id</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>geo hash</th>\n<th>business_id</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>32feac</td>\n<td>343</td>\n</tr>\n<tr>\n<td>32feac</td>\n<td>123</td>\n</tr>\n<tr>\n<td>f3lcad</td>\n<td>456</td>\n</tr>\n<tr>\n<td>f3lcad</td>\n<td>789</td>\n</tr>\n<tr>\n<td>f3lcad</td>\n<td>111</td>\n</tr>\n</tbody>\n</table>\n<p>전자 보다 후자가 나은 이유</p>\n<ol>\n<li>생성 및 업데이트 비용이 적음.</li>\n<li>병렬적으로 갱신이 발생한다면 락을 고려해야해서 성능 저하가 발생할 수 있음.</li>\n</ol>\n<h2>지리 정보 색인 규모 확장</h2>\n<ol>\n<li>샤딩을 진행하려면 실제 저장되는 데이터의 양을 고려해야함.</li>\n<li>지리 정보 색인은 전부 저장한다고해도 1.71G 밖에 안됨.</li>\n<li>이 경우 Read 데이터베이스를 늘리는게 좋은 판단.</li>\n</ol>\n<h2>캐시</h2>\n<p>캐시를 적용하려면 일단 캐시가 정말 필요한지 판단해야함.</p>\n<p>“데이터 베이스 크기가 상대적으로 작다.” -> 질의문은 I/O 에 좌우되지 않고 메모리 캐시와 비슷함.</p>\n<p>위의 이유를 일단 기본적으로 생각해야함. 그래도 도입해야 판단이 된다면 비용 분석에 유의.</p>\n<h3>캐시 키</h3>\n<ul>\n<li>사용자의 위도 및 경도 -> 위치 정보는 추정치 이며 같은 자리라고 해도 다른 위도, 경도를 가질 수 있기 때문에 고려대상 X</li>\n<li>사용자의 위도 및 경도를 기반으로 한 geo hash -> 사용자의 위치를 기반으로 한 캐시 키를 사용하는 것이 좋음.\n<ul>\n<li>Value 에 해당하는 작업장 정보는 자주 수정되지 않는다.</li>\n<li>검색 반경이 500m, 1km, 2km 여러가지가 존재. 모두 캐시적용 해놓아야함.</li>\n</ul>\n</li>\n</ul>\n<h3>캐시 무효화</h3>\n<ul>\n<li>사업장 정보의 변경이 발생할 때 캐시를 무효화\n<ul>\n<li>빈도수가 적기 때문에 락을 고려하지 않아도 됨.</li>\n</ul>\n</li>\n</ul>\n<h2>지역 및 가용성 구역</h2>\n<ul>\n<li>여러 지역에 나눠서 설치</li>\n<li>빠른 응답속도와 데이터보안의 이점이 존재.</li>\n<li>위에서 언급한 AWS Global Accelerator 사용</li>\n</ul>\n<h2>추가질문</h2>\n<ol>\n<li>현재 영업중인 사업장, 식당 정보만 받아오기 등의 요구사항 처리는 어떻게?\n사용자의 위치에 해당하는 geo hash 를 찾아서 모든 사업장을 가져온다. 해당하는 사업장들의 개수가 적기 때문에\n여기서 필터링하여 반환.</li>\n</ol>\n<h2>AWS 아키텍처</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84ab3b65774523daecb903a0e5dff395/44e21/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTklEQVR42l2Sa2sTURCGI2iLqLns7exukt3c7xuTNIlNbYwVjbfSEltt7QelKIoIVkXwD9hvgiB+Efyvj3MSbbUfXuZwOPPMO3MmViyW6HS7tFotet0+rz7/pNoecmv2kqi3xuO3xxRKTWrVGpbKEGQrWKkkynGwTQszmcDz0niuL9EnVq83WOkPWBkMaTYiNg8+Um52mDx8SrMzZHx3l9H6hG8/frE9imgHAdOD95SjIf3xlFt7RyQTV3AchSvQWL5QEIc9InFYLpX5slngWsUlKZVrWUMeX8b3fYZrEw5vVFgpWIy3nlOqX6U9uM5k+5BUIi5AZwEMwxztXo3BvS2qUZ/1Zp6sZ6OUT6PcxncVjmWgRI5Ko9w0F5fOc/jiNduzHZYvnMPW7Vs6xyMWBCHd1Q7RcEChWMW0PZJGirQXMO4/ohRkWKkGfN+PKGcUlq3EdYLZzhNuT+8TF3e2Y2PbtjgUYDabJcx4hGlRGOLLYHUR35dBe57EDGnRsF7EUy6WZZFMxYnH4yQErEH67gQY5gs8eHfMcDoj42kHiwd6JlpKhm1Ku0uXljHEeV5+OaqMTiA6mqb5T8u5HHsfjpk+O5KVyMyrKKX+DNmTudl0GiP273ySe5dSvkG/tTGHaNhfnbYcZMn5Dq3Vm1Q6A1wB6H3SUP3AtFIM2hu82f0qu5aeg1JGQiD2/0BLDCw+JSCXy5OT+YVy1gmGYczjqQwMczEvRz7F0nfWGYdSYA7Un5KTtrUCgepWdeJZnbQlScpxcUVqfl7IlTXTLf8GN+Y11+3cRUAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/84ab3b65774523daecb903a0e5dff395/a59e9/img.webp 192w,\n/static/84ab3b65774523daecb903a0e5dff395/0ca9f/img.webp 384w,\n/static/84ab3b65774523daecb903a0e5dff395/dc9b9/img.webp 768w,\n/static/84ab3b65774523daecb903a0e5dff395/e2c2f/img.webp 1152w,\n/static/84ab3b65774523daecb903a0e5dff395/883d7/img.webp 1367w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/84ab3b65774523daecb903a0e5dff395/3b721/img.png 192w,\n/static/84ab3b65774523daecb903a0e5dff395/66595/img.png 384w,\n/static/84ab3b65774523daecb903a0e5dff395/fe486/img.png 768w,\n/static/84ab3b65774523daecb903a0e5dff395/d2d74/img.png 1152w,\n/static/84ab3b65774523daecb903a0e5dff395/44e21/img.png 1367w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/84ab3b65774523daecb903a0e5dff395/fe486/img.png\"\n            alt=\"AWS 설계도\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1>마무리</h1>","frontmatter":{"title":"대규모 시스템 설계 기초 2 - 접근성 발표자료","summary":"접근성 서비스","date":"2024.11.02.","categories":["study","WIL"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVR42u2U207CQBCG+8g+go9hYvTCExeoGAWDB2JQsIDFghwUiJwKrXLoAkVUvPidWUAw8cIE4pUXf3e7s/v905lmlZ5dwyKl/AMXC3REfXFAhomWgX5nPqjSIchwYCEQTGBp2YtS8REv3Qm0Do5326zaeBypJ+j9RyAFPwioJ+/hP9cl8K1vwm5U5YHhi4W3nol3h0bHJFl4pZGNBrTuiJrUt082KkX4Azo8xzcIhu9kBmo0De9pHFEtg0TyAXriHvHbrDSOxTO4UlNIp3MQTQNtNm+Pgc2nKjTamM8XcKNlkcsVpI78GtZdIRyQyfZeBKtbIbgPY9h0q3DtRxCOpOAjQzU2Mj670FEghsKHr65TaBGYg+x4QtnG9ax05lpxWdidY9y4SUY8t2mNy1MpF9GwKlCezQplEsbaTghbuypWNi7h8Wl4pfpMOu5Qc7hOfVGXf8PXupiKG8kxhR/sxkUWY/Hmrj3t4uz8V//hrNNsx/4vhz8CitE9MNKcQIY0n8owjBLsliX1CTPZynf2Ss39AAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/a229594a2de7c0ed63d877869e75fd38/d0859/common.png","srcSet":"/static/a229594a2de7c0ed63d877869e75fd38/f1689/common.png 270w,\n/static/a229594a2de7c0ed63d877869e75fd38/42fd3/common.png 540w,\n/static/a229594a2de7c0ed63d877869e75fd38/d0859/common.png 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"},"sources":[{"srcSet":"/static/a229594a2de7c0ed63d877869e75fd38/7e223/common.webp 270w,\n/static/a229594a2de7c0ed63d877869e75fd38/5cfb6/common.webp 540w,\n/static/a229594a2de7c0ed63d877869e75fd38/941f9/common.webp 1080w","type":"image/webp","sizes":"(min-width: 1080px) 1080px, 100vw"}]},"width":1080,"height":1080}},"publicURL":"/static/a229594a2de7c0ed63d877869e75fd38/common.png"}}}}]}},"pageContext":{"slug":"/system-2-2024-11-07-wil/"}},"staticQueryHashes":[],"slicesMap":{}}