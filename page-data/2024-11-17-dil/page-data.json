{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2024-11-17-dil/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>문제 이해 및 설계범위 확정</h1>\n<ul>\n<li>10억 DAU</li>\n<li>위치 갱신, 경로 안내, ETA, 지도 표시 기능을 제공하는 서비스</li>\n<li>도로 데이터는 수 TB 규모의 가공되지 않은 데이터</li>\n<li>다양한 이동수단 지원</li>\n</ul>\n<h2>개념</h2>\n<ul>\n<li>웹 메르카토르</li>\n<li>지오코딩 <a href=\"https://www.data.go.kr/data/15101106/openapi.do?recommendDataYn=Y\" target=\"_blank\" rel=\"nofollow\">국토교통부 지오코딩 API</a></li>\n<li>지오해싱</li>\n<li>지도표시\n<ul>\n<li>확대 수준에 따른 타일 표시</li>\n</ul>\n</li>\n<li>경로 안내 알고리즘을 위한 도로 데이터 처리 (경로 안내 타일)\n<ul>\n<li>다익스트라 알고리즘을 일반적으로 사용</li>\n<li>도로망을 노드(교차로)와 엣지(도로)로 구성된 그래프 자료구조로 변환.</li>\n<li>하나의 도로망은 도로로 연결된 도로망을 참조관계로 유지.</li>\n<li>PNG 가 아닌 이진 파일</li>\n</ul>\n</li>\n<li>계층적 경로 안내 타일\n<ul>\n<li>구체성 정도를 상, 중, 하로 구분하여 경로 안내 타일을 준비</li>\n</ul>\n</li>\n</ul>\n<h1>개략적 규모 추정.</h1>\n<h2>저장소 사용량</h2>\n<h3>세계 지도</h3>\n<ul>\n<li>한 장의 타일 256x256 픽셀 약 100KB\n<ul>\n<li>256x256x3 = 192KB</li>\n<li>무손실 PNG 압축 -> 100KB</li>\n</ul>\n</li>\n<li>21번 확대 가능했을 때 타일의 갯수 4^21 약 4.4조</li>\n<li>100KB * 4.4조 = 440PB</li>\n<li>90% 는 살지 않는 지역. 압축시 90% 감소 -> 88PB</li>\n<li>모든 단계의 타일을 전부 합 약 100PB</li>\n</ul>\n<h2>서버 대역폭</h2>\n<p>요청의 종류</p>\n<ul>\n<li>경로 안내 요청</li>\n<li>위치 갱신 요청</li>\n<li>경로 안내기능을 평균적으로 주당 35분</li>\n<li>350억 분, 즉 하루에 50억분</li>\n<li>GPS 를 1초마다 전송시 하루에 3000억 요청</li>\n<li>3000억 / 10^5 = 300만 QPS</li>\n<li>클라이언트에서 15초마다 데이터를 모아서 보낼 시 20만 QPS</li>\n<li>최대 QPS 는 다섯배로 가정하면 100만 QPS</li>\n</ul>\n<h1>개략적 설계안 제시 및 동의 구하기</h1>\n<h2>위치 서비스</h2>\n<p>사용자의 위치를 기록하는 역할.</p>\n<p>장점.</p>\n<ol>\n<li>해당 데이터 스트림을 활용해 시스템을 점차 개선 가능.\n<ul>\n<li>실시간 교통상황 모니터링</li>\n<li>폐쇄된 도로 탐지.</li>\n<li>개인화된 경험.</li>\n</ul>\n</li>\n<li>최적화된 ETA 계산.</li>\n</ol>\n<p>많은 쓰기 요청에 적합한 카산드라 데이터베이스.\n데이터 스트림 처리를 위해 카프카 사용.</p>\n<h2>경로 안내 서비스</h2>\n<p>A 에서 B 지점으로 가는 합리적으로 빠른 경로를 찾아주는 역할.</p>\n<h2>지도 표시</h2>\n<ol>\n<li>동적으로 타일을 만드는 방법.\n<ul>\n<li>서버 클러스터에 심각한 부하.</li>\n<li>캐시를 활용하기 힘듬.</li>\n</ul>\n</li>\n<li>미리 만들어 놓은 타일을 사용하는 방법.\n<ul>\n<li>클라이언트는 지도 타일이 필요한 경우 필요한 위치의 지오해시를 구해서 서버에 요청</li>\n<li>POP(Point of Presence) 에 캐시 서버를 두어서 빠르게 제공.</li>\n</ul>\n</li>\n<li>주어진 위도/경도 및 확대 수준을 타일 URL 로 변환하는 알고리즘은 별도 서비스에 구현.</li>\n</ol>","frontmatter":{"title":"대규모 시스템 설계 기초 2 DIL","summary":"3장 구글 맵","date":"2024.11.17.","categories":["study","DIL"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVR42u2U207CQBCG+8g+go9hYvTCExeoGAWDB2JQsIDFghwUiJwKrXLoAkVUvPidWUAw8cIE4pUXf3e7s/v905lmlZ5dwyKl/AMXC3REfXFAhomWgX5nPqjSIchwYCEQTGBp2YtS8REv3Qm0Do5326zaeBypJ+j9RyAFPwioJ+/hP9cl8K1vwm5U5YHhi4W3nol3h0bHJFl4pZGNBrTuiJrUt082KkX4Azo8xzcIhu9kBmo0De9pHFEtg0TyAXriHvHbrDSOxTO4UlNIp3MQTQNtNm+Pgc2nKjTamM8XcKNlkcsVpI78GtZdIRyQyfZeBKtbIbgPY9h0q3DtRxCOpOAjQzU2Mj670FEghsKHr65TaBGYg+x4QtnG9ax05lpxWdidY9y4SUY8t2mNy1MpF9GwKlCezQplEsbaTghbuypWNi7h8Wl4pfpMOu5Qc7hOfVGXf8PXupiKG8kxhR/sxkUWY/Hmrj3t4uz8V//hrNNsx/4vhz8CitE9MNKcQIY0n8owjBLsliX1CTPZynf2Ss39AAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/a229594a2de7c0ed63d877869e75fd38/d0859/common.png","srcSet":"/static/a229594a2de7c0ed63d877869e75fd38/f1689/common.png 270w,\n/static/a229594a2de7c0ed63d877869e75fd38/42fd3/common.png 540w,\n/static/a229594a2de7c0ed63d877869e75fd38/d0859/common.png 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"},"sources":[{"srcSet":"/static/a229594a2de7c0ed63d877869e75fd38/7e223/common.webp 270w,\n/static/a229594a2de7c0ed63d877869e75fd38/5cfb6/common.webp 540w,\n/static/a229594a2de7c0ed63d877869e75fd38/941f9/common.webp 1080w","type":"image/webp","sizes":"(min-width: 1080px) 1080px, 100vw"}]},"width":1080,"height":1080}},"publicURL":"/static/a229594a2de7c0ed63d877869e75fd38/common.png"}}}}]}},"pageContext":{"slug":"/2024-11-17-dil/"}},"staticQueryHashes":[],"slicesMap":{}}